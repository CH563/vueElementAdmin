webpackJsonp([7],{128:function(t,n,i){"use strict";var e=i(25),o=i(462);e.default.use(o.a),n.a=new o.a({routes:[{path:"/login",component:function(t){i.e(1).then(function(){var n=[i(467)];t.apply(null,n)}.bind(this)).catch(i.oe)},name:"login"},{path:"/",component:function(t){i.e(5).then(function(){var n=[i(468)];t.apply(null,n)}.bind(this)).catch(i.oe)},meta:{requireAuth:!0},redirect:{path:"/home"},children:[{path:"/404",component:function(t){i.e(2).then(function(){var n=[i(471)];t.apply(null,n)}.bind(this)).catch(i.oe)},name:"404"},{path:"/home",component:function(t){i.e(3).then(function(){var n=[i(472)];t.apply(null,n)}.bind(this)).catch(i.oe)},name:"主页"},{path:"/form",name:"表单",component:function(t){i.e(4).then(function(){var n=[i(469)];t.apply(null,n)}.bind(this)).catch(i.oe)}},{path:"/chart",name:"图表",component:function(t){i.e(0).then(function(){var n=[i(470)];t.apply(null,n)}.bind(this)).catch(i.oe)}}]},{path:"*",redirect:{path:"/404"}}]})},177:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i(25),o=i(460),r=i.n(o),s=i(128),a=i(122),h=i.n(a),c=i(169),l=i.n(c),u=i(455),f=(i.n(u),i(456));i.n(f),i(221),i(180);e.default.config.productionTip=!1,e.default.use(l.a),e.default.prototype.$axios=h.a,s.a.beforeEach(function(t,n,i){if("/login"==t.path&&sessionStorage.removeItem("BIGDATA_PLATFORM"),t.matched.some(function(t){return t.meta.requireAuth})){if(sessionStorage.getItem("BIGDATA_PLATFORM"))return i(),!1;i({path:"/login"})}else i()}),new e.default({router:s.a,render:function(t){return t(r.a)}}).$mount("#app")},180:function(t,n,i){"use strict";var e=e||{};e.Color=function(t){this.autoUpdate=!0,this.setHex(t)},e.Color.prototype={setRGBA:function(t,n,i,e){this.r=t,this.g=n,this.b=i,this.a=e,this.autoUpdate&&(this.updateHex(),this.updateStyleString())},setHex:function(t){this.hex=t,this.autoUpdate&&(this.updateRGBA(),this.updateStyleString())},copyRGB:function(t){this.r=t.r,this.g=t.g,this.b=t.b},copyRGBA:function(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a},multiplySelfRGB:function(t){this.r*=t.r,this.g*=t.g,this.b*=t.b},updateHex:function(){this.hex=Math.floor(255*this.a)<<24|Math.floor(255*this.r)<<16|Math.floor(255*this.g)<<8|Math.floor(255*this.b)},updateRGBA:function(){this.a=(this.hex>>24&255)/255,this.r=(this.hex>>16&255)/255,this.g=(this.hex>>8&255)/255,this.b=(255&this.hex)/255},updateStyleString:function(){this.__styleString="rgba("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+","+this.a+")"},toString:function(){return"THREE.Color ( r: "+this.r+", g: "+this.g+", b: "+this.b+", a: "+this.a+", hex: "+this.hex+" )"}},e.Vector2=function(t,n){this.x=t||0,this.y=n||0},e.Vector2.prototype={set:function(t,n){return this.x=t,this.y=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this},add:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this},sub:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},unit:function(){return this.multiplyScalar(1/this.length()),this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthSq:function(){return this.x*this.x+this.y*this.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},clone:function(){return new e.Vector2(this.x,this.y)},toString:function(){return"THREE.Vector2 ("+this.x+", "+this.y+")"}},e.Vector3=function(t,n,i){this.x=t||0,this.y=n||0,this.z=i||0},e.Vector3.prototype={set:function(t,n,i){return this.x=t,this.y=n,this.z=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},sub:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},cross:function(t,n){return this.x=t.y*n.z-t.z*n.y,this.y=t.z*n.x-t.x*n.z,this.z=t.x*n.y-t.y*n.x,this},crossSelf:function(t){var n=this.x,i=this.y,e=this.z;return this.x=i*t.z-e*t.y,this.y=e*t.x-n*t.z,this.z=n*t.y-i*t.x,this},multiplySelf:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScalar:function(t){return this.x/=t,this.y/=t,this.z/=t,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,i=this.y-t.y,e=this.z-t.z;return n*n+i*i+e*e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},normalize:function(){return this.length()>0?this.multiplyScalar(1/this.length()):this.multiplyScalar(0),this},setLength:function(t){return this.normalize().multiplyScalar(t)},isZero:function(){var t=1e-4;return Math.abs(this.x)<t&&Math.abs(this.y)<t&&Math.abs(this.z)<t},clone:function(){return new e.Vector3(this.x,this.y,this.z)},toString:function(){return"THREE.Vector3 ( "+this.x+", "+this.y+", "+this.z+" )"}},e.Vector4=function(t,n,i,e){this.x=t||0,this.y=n||0,this.z=i||0,this.w=e||1},e.Vector4.prototype={set:function(t,n,i,e){return this.x=t,this.y=n,this.z=i,this.w=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},add:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},sub:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},clone:function(){return new e.Vector4(this.x,this.y,this.z,this.w)},toString:function(){return"THREE.Vector4 ("+this.x+", "+this.y+", "+this.z+", "+this.w+")"}},e.Rectangle=function(){function t(){r=e-n,s=o-i}var n,i,e,o,r,s,a=!0;this.getX=function(){return n},this.getY=function(){return i},this.getWidth=function(){return r},this.getHeight=function(){return s},this.getX1=function(){return n},this.getY1=function(){return i},this.getX2=function(){return e},this.getY2=function(){return o},this.set=function(r,s,h,c){a=!1,n=r,i=s,e=h,o=c,t()},this.addPoint=function(r,s){a?(a=!1,n=r,i=s,e=r,o=s):(n=Math.min(n,r),i=Math.min(i,s),e=Math.max(e,r),o=Math.max(o,s)),t()},this.addRectangle=function(r){a?(a=!1,n=r.getX1(),i=r.getY1(),e=r.getX2(),o=r.getY2()):(n=Math.min(n,r.getX1()),i=Math.min(i,r.getY1()),e=Math.max(e,r.getX2()),o=Math.max(o,r.getY2())),t()},this.inflate=function(r){n-=r,i-=r,e+=r,o+=r,t()},this.minSelf=function(r){n=Math.max(n,r.getX1()),i=Math.max(i,r.getY1()),e=Math.min(e,r.getX2()),o=Math.min(o,r.getY2()),t()},this.instersects=function(t){return Math.min(e,t.getX2())-Math.max(n,t.getX1())>=0&&Math.min(o,t.getY2())-Math.max(i,t.getY1())>=0},this.empty=function(){a=!0,n=0,i=0,e=0,o=0,t()},this.isEmpty=function(){return a},this.toString=function(){return"THREE.Rectangle (x1: "+n+", y1: "+o+", x2: "+e+", y1: "+i+", width: "+r+", height: "+s+")"}},e.Matrix3=function(){this.m=[]},e.Matrix3.prototype={transpose:function(){var t;return t=this.m[1],this.m[1]=this.m[3],this.m[3]=t,t=this.m[2],this.m[2]=this.m[6],this.m[6]=t,t=this.m[5],this.m[5]=this.m[7],this.m[7]=t,this}},e.Matrix4=function(){this._x=new e.Vector3,this._y=new e.Vector3,this._z=new e.Vector3},e.Matrix4.prototype={n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1,identity:function(){this.n11=1,this.n12=0,this.n13=0,this.n14=0,this.n21=0,this.n22=1,this.n23=0,this.n24=0,this.n31=0,this.n32=0,this.n33=1,this.n34=0,this.n41=0,this.n42=0,this.n43=0,this.n44=1},copy:function(t){this.n11=t.n11,this.n12=t.n12,this.n13=t.n13,this.n14=t.n14,this.n21=t.n21,this.n22=t.n22,this.n23=t.n23,this.n24=t.n24,this.n31=t.n31,this.n32=t.n32,this.n33=t.n33,this.n34=t.n34,this.n41=t.n41,this.n42=t.n42,this.n43=t.n43,this.n44=t.n44},lookAt:function(t,n,i){var e=this._x,o=this._y,r=this._z;r.sub(t,n),r.normalize(),e.cross(i,r),e.normalize(),o.cross(r,e),o.normalize(),this.n11=e.x,this.n12=e.y,this.n13=e.z,this.n14=-e.dot(t),this.n21=o.x,this.n22=o.y,this.n23=o.z,this.n24=-o.dot(t),this.n31=r.x,this.n32=r.y,this.n33=r.z,this.n34=-r.dot(t),this.n41=0,this.n42=0,this.n43=0,this.n44=1},transform:function(t){var n=t.x,i=t.y,e=t.z,o=t.w?t.w:1;return t.x=this.n11*n+this.n12*i+this.n13*e+this.n14*o,t.y=this.n21*n+this.n22*i+this.n23*e+this.n24*o,t.z=this.n31*n+this.n32*i+this.n33*e+this.n34*o,o=this.n41*n+this.n42*i+this.n43*e+this.n44*o,t.w?t.w=o:(t.x=t.x/o,t.y=t.y/o,t.z=t.z/o),t},crossVector:function(t){var n=new e.Vector4;return n.x=this.n11*t.x+this.n12*t.y+this.n13*t.z+this.n14*t.w,n.y=this.n21*t.x+this.n22*t.y+this.n23*t.z+this.n24*t.w,n.z=this.n31*t.x+this.n32*t.y+this.n33*t.z+this.n34*t.w,n.w=t.w?this.n41*t.x+this.n42*t.y+this.n43*t.z+this.n44*t.w:1,n},multiply:function(t,n){this.n11=t.n11*n.n11+t.n12*n.n21+t.n13*n.n31+t.n14*n.n41,this.n12=t.n11*n.n12+t.n12*n.n22+t.n13*n.n32+t.n14*n.n42,this.n13=t.n11*n.n13+t.n12*n.n23+t.n13*n.n33+t.n14*n.n43,this.n14=t.n11*n.n14+t.n12*n.n24+t.n13*n.n34+t.n14*n.n44,this.n21=t.n21*n.n11+t.n22*n.n21+t.n23*n.n31+t.n24*n.n41,this.n22=t.n21*n.n12+t.n22*n.n22+t.n23*n.n32+t.n24*n.n42,this.n23=t.n21*n.n13+t.n22*n.n23+t.n23*n.n33+t.n24*n.n43,this.n24=t.n21*n.n14+t.n22*n.n24+t.n23*n.n34+t.n24*n.n44,this.n31=t.n31*n.n11+t.n32*n.n21+t.n33*n.n31+t.n34*n.n41,this.n32=t.n31*n.n12+t.n32*n.n22+t.n33*n.n32+t.n34*n.n42,this.n33=t.n31*n.n13+t.n32*n.n23+t.n33*n.n33+t.n34*n.n43,this.n34=t.n31*n.n14+t.n32*n.n24+t.n33*n.n34+t.n34*n.n44,this.n41=t.n41*n.n11+t.n42*n.n21+t.n43*n.n31+t.n44*n.n41,this.n42=t.n41*n.n12+t.n42*n.n22+t.n43*n.n32+t.n44*n.n42,this.n43=t.n41*n.n13+t.n42*n.n23+t.n43*n.n33+t.n44*n.n43,this.n44=t.n41*n.n14+t.n42*n.n24+t.n43*n.n34+t.n44*n.n44},multiplySelf:function(t){var n=this.n11,i=this.n12,e=this.n13,o=this.n14,r=this.n21,s=this.n22,a=this.n23,h=this.n24,c=this.n31,l=this.n32,u=this.n33,f=this.n34,m=this.n41,p=this.n42,g=this.n43,x=this.n44;this.n11=n*t.n11+i*t.n21+e*t.n31+o*t.n41,this.n12=n*t.n12+i*t.n22+e*t.n32+o*t.n42,this.n13=n*t.n13+i*t.n23+e*t.n33+o*t.n43,this.n14=n*t.n14+i*t.n24+e*t.n34+o*t.n44,this.n21=r*t.n11+s*t.n21+a*t.n31+h*t.n41,this.n22=r*t.n12+s*t.n22+a*t.n32+h*t.n42,this.n23=r*t.n13+s*t.n23+a*t.n33+h*t.n43,this.n24=r*t.n14+s*t.n24+a*t.n34+h*t.n44,this.n31=c*t.n11+l*t.n21+u*t.n31+f*t.n41,this.n32=c*t.n12+l*t.n22+u*t.n32+f*t.n42,this.n33=c*t.n13+l*t.n23+u*t.n33+f*t.n43,this.n34=c*t.n14+l*t.n24+u*t.n34+f*t.n44,this.n41=m*t.n11+p*t.n21+g*t.n31+x*t.n41,this.n42=m*t.n12+p*t.n22+g*t.n32+x*t.n42,this.n43=m*t.n13+p*t.n23+g*t.n33+x*t.n43,this.n44=m*t.n14+p*t.n24+g*t.n34+x*t.n44},multiplyScalar:function(t){this.n11*=t,this.n12*=t,this.n13*=t,this.n14*=t,this.n21*=t,this.n22*=t,this.n23*=t,this.n24*=t,this.n31*=t,this.n32*=t,this.n33*=t,this.n34*=t,this.n41*=t,this.n42*=t,this.n43*=t,this.n44*=t},determinant:function(){return this.n14*this.n23*this.n32*this.n41-this.n13*this.n24*this.n32*this.n41-this.n14*this.n22*this.n33*this.n41+this.n12*this.n24*this.n33*this.n41+this.n13*this.n22*this.n34*this.n41-this.n12*this.n23*this.n34*this.n41-this.n14*this.n23*this.n31*this.n42+this.n13*this.n24*this.n31*this.n42+this.n14*this.n21*this.n33*this.n42-this.n11*this.n24*this.n33*this.n42-this.n13*this.n21*this.n34*this.n42+this.n11*this.n23*this.n34*this.n42+this.n14*this.n22*this.n31*this.n43-this.n12*this.n24*this.n31*this.n43-this.n14*this.n21*this.n32*this.n43+this.n11*this.n24*this.n32*this.n43+this.n12*this.n21*this.n34*this.n43-this.n11*this.n22*this.n34*this.n43-this.n13*this.n22*this.n31*this.n44+this.n12*this.n23*this.n31*this.n44+this.n13*this.n21*this.n32*this.n44-this.n11*this.n23*this.n32*this.n44-this.n12*this.n21*this.n33*this.n44+this.n11*this.n22*this.n33*this.n44},transpose:function(){function t(t,n,i){var e=t[n];t[n]=t[i],t[i]=e}return t(this,"n21","n12"),t(this,"n31","n13"),t(this,"n32","n23"),t(this,"n41","n14"),t(this,"n42","n24"),t(this,"n43","n34"),this},clone:function(){var t=new e.Matrix4;return t.n11=this.n11,t.n12=this.n12,t.n13=this.n13,t.n14=this.n14,t.n21=this.n21,t.n22=this.n22,t.n23=this.n23,t.n24=this.n24,t.n31=this.n31,t.n32=this.n32,t.n33=this.n33,t.n34=this.n34,t.n41=this.n41,t.n42=this.n42,t.n43=this.n43,t.n44=this.n44,t},flatten:function(){return[this.n11,this.n21,this.n31,this.n41,this.n12,this.n22,this.n32,this.n42,this.n13,this.n23,this.n33,this.n43,this.n14,this.n24,this.n34,this.n44]},toString:function(){return"| "+this.n11+" "+this.n12+" "+this.n13+" "+this.n14+" |\n| "+this.n21+" "+this.n22+" "+this.n23+" "+this.n24+" |\n| "+this.n31+" "+this.n32+" "+this.n33+" "+this.n34+" |\n| "+this.n41+" "+this.n42+" "+this.n43+" "+this.n44+" |"}},e.Matrix4.translationMatrix=function(t,n,i){var o=new e.Matrix4;return o.n14=t,o.n24=n,o.n34=i,o},e.Matrix4.scaleMatrix=function(t,n,i){var o=new e.Matrix4;return o.n11=t,o.n22=n,o.n33=i,o},e.Matrix4.rotationXMatrix=function(t){var n=new e.Matrix4;return n.n22=n.n33=Math.cos(t),n.n32=Math.sin(t),n.n23=-n.n32,n},e.Matrix4.rotationYMatrix=function(t){var n=new e.Matrix4;return n.n11=n.n33=Math.cos(t),n.n13=Math.sin(t),n.n31=-n.n13,n},e.Matrix4.rotationZMatrix=function(t){var n=new e.Matrix4;return n.n11=n.n22=Math.cos(t),n.n21=Math.sin(t),n.n12=-n.n21,n},e.Matrix4.rotationAxisAngleMatrix=function(t,n){var i=new e.Matrix4,o=Math.cos(n),r=Math.sin(n),s=1-o,a=t.x,h=t.y,c=t.z;return i.n11=s*a*a+o,i.n12=s*a*h-r*c,i.n13=s*a*c+r*h,i.n21=s*a*h+r*c,i.n22=s*h*h+o,i.n23=s*h*c-r*a,i.n31=s*a*c-r*h,i.n32=s*h*c+r*a,i.n33=s*c*c+o,i},e.Matrix4.makeInvert=function(t){var n=new e.Matrix4;return n.n11=t.n23*t.n34*t.n42-t.n24*t.n33*t.n42+t.n24*t.n32*t.n43-t.n22*t.n34*t.n43-t.n23*t.n32*t.n44+t.n22*t.n33*t.n44,n.n12=t.n14*t.n33*t.n42-t.n13*t.n34*t.n42-t.n14*t.n32*t.n43+t.n12*t.n34*t.n43+t.n13*t.n32*t.n44-t.n12*t.n33*t.n44,n.n13=t.n13*t.n24*t.n42-t.n14*t.n23*t.n42+t.n14*t.n22*t.n43-t.n12*t.n24*t.n43-t.n13*t.n22*t.n44+t.n12*t.n23*t.n44,n.n14=t.n14*t.n23*t.n32-t.n13*t.n24*t.n32-t.n14*t.n22*t.n33+t.n12*t.n24*t.n33+t.n13*t.n22*t.n34-t.n12*t.n23*t.n34,n.n21=t.n24*t.n33*t.n41-t.n23*t.n34*t.n41-t.n24*t.n31*t.n43+t.n21*t.n34*t.n43+t.n23*t.n31*t.n44-t.n21*t.n33*t.n44,n.n22=t.n13*t.n34*t.n41-t.n14*t.n33*t.n41+t.n14*t.n31*t.n43-t.n11*t.n34*t.n43-t.n13*t.n31*t.n44+t.n11*t.n33*t.n44,n.n23=t.n14*t.n23*t.n41-t.n13*t.n24*t.n41-t.n14*t.n21*t.n43+t.n11*t.n24*t.n43+t.n13*t.n21*t.n44-t.n11*t.n23*t.n44,n.n24=t.n13*t.n24*t.n31-t.n14*t.n23*t.n31+t.n14*t.n21*t.n33-t.n11*t.n24*t.n33-t.n13*t.n21*t.n34+t.n11*t.n23*t.n34,n.n31=t.n22*t.n34*t.n41-t.n24*t.n32*t.n41+t.n24*t.n31*t.n42-t.n21*t.n34*t.n42-t.n22*t.n31*t.n44+t.n21*t.n32*t.n44,n.n32=t.n14*t.n32*t.n41-t.n12*t.n34*t.n41-t.n14*t.n31*t.n42+t.n11*t.n34*t.n42+t.n12*t.n31*t.n44-t.n11*t.n32*t.n44,n.n33=t.n13*t.n24*t.n41-t.n14*t.n22*t.n41+t.n14*t.n21*t.n42-t.n11*t.n24*t.n42-t.n12*t.n21*t.n44+t.n11*t.n22*t.n44,n.n34=t.n14*t.n22*t.n31-t.n12*t.n24*t.n31-t.n14*t.n21*t.n32+t.n11*t.n24*t.n32+t.n12*t.n21*t.n34-t.n11*t.n22*t.n34,n.n41=t.n23*t.n32*t.n41-t.n22*t.n33*t.n41-t.n23*t.n31*t.n42+t.n21*t.n33*t.n42+t.n22*t.n31*t.n43-t.n21*t.n32*t.n43,n.n42=t.n12*t.n33*t.n41-t.n13*t.n32*t.n41+t.n13*t.n31*t.n42-t.n11*t.n33*t.n42-t.n12*t.n31*t.n43+t.n11*t.n32*t.n43,n.n43=t.n13*t.n22*t.n41-t.n12*t.n23*t.n41-t.n13*t.n21*t.n42+t.n11*t.n23*t.n42+t.n12*t.n21*t.n43-t.n11*t.n22*t.n43,n.n44=t.n12*t.n23*t.n31-t.n13*t.n22*t.n31+t.n13*t.n21*t.n32-t.n11*t.n23*t.n32-t.n12*t.n21*t.n33+t.n11*t.n22*t.n33,n.multiplyScalar(1/t.determinant()),n},e.Matrix4.makeInvert3x3=function(t){var n,i=t.flatten(),o=new e.Matrix3,r=i[10]*i[5]-i[6]*i[9],s=-i[10]*i[1]+i[2]*i[9],a=i[6]*i[1]-i[2]*i[5],h=-i[10]*i[4]+i[6]*i[8],c=i[10]*i[0]-i[2]*i[8],l=-i[6]*i[0]+i[2]*i[4],u=i[9]*i[4]-i[5]*i[8],f=-i[9]*i[0]+i[1]*i[8],m=i[5]*i[0]-i[1]*i[4],p=i[0]*r+i[1]*h+i[2]*u;if(0==p)throw"matrix not invertible";return n=1/p,o.m[0]=n*r,o.m[1]=n*s,o.m[2]=n*a,o.m[3]=n*h,o.m[4]=n*c,o.m[5]=n*l,o.m[6]=n*u,o.m[7]=n*f,o.m[8]=n*m,o},e.Matrix4.makeFrustum=function(t,n,i,o,r,s){var a,h,c,l,u,f,m;return a=new e.Matrix4,h=2*r/(n-t),c=2*r/(o-i),l=(n+t)/(n-t),u=(o+i)/(o-i),f=-(s+r)/(s-r),m=-2*s*r/(s-r),a.n11=h,a.n12=0,a.n13=l,a.n14=0,a.n21=0,a.n22=c,a.n23=u,a.n24=0,a.n31=0,a.n32=0,a.n33=f,a.n34=m,a.n41=0,a.n42=0,a.n43=-1,a.n44=0,a},e.Matrix4.makePerspective=function(t,n,i,o){var r,s,a,h;return r=i*Math.tan(t*Math.PI/360),s=-r,a=s*n,h=r*n,e.Matrix4.makeFrustum(a,h,s,r,i,o)},e.Matrix4.makeOrtho=function(t,n,i,o,r,s){var a,h,c,l,u,f,m;return a=new e.Matrix4,u=n-t,f=o-i,m=s-r,h=(n+t)/u,c=(o+i)/f,l=(s+r)/m,a.n11=2/u,a.n12=0,a.n13=0,a.n14=-h,a.n21=0,a.n22=2/f,a.n23=0,a.n24=-c,a.n31=0,a.n32=0,a.n33=-2/m,a.n34=-l,a.n41=0,a.n42=0,a.n43=0,a.n44=1,a},e.Vertex=function(t,n){this.position=t||new e.Vector3,this.positionWorld=new e.Vector3,this.positionScreen=new e.Vector3,this.normal=n||new e.Vector3,this.normalWorld=new e.Vector3,this.normalScreen=new e.Vector3,this.__visible=!0},e.Vertex.prototype={toString:function(){return"THREE.Vertex ( position: "+this.position+", normal: "+this.normal+" )"}},e.Face3=function(t,n,i,o,r){this.a=t,this.b=n,this.c=i,this.centroid=new e.Vector3,this.normal=o instanceof e.Vector3?o:new e.Vector3,this.vertexNormals=o instanceof Array?o:[],this.material=r instanceof Array?r:[r]},e.Face3.prototype={toString:function(){return"THREE.Face3 ( "+this.a+", "+this.b+", "+this.c+" )"}},e.Face4=function(t,n,i,o,r,s){this.a=t,this.b=n,this.c=i,this.d=o,this.centroid=new e.Vector3,this.normal=r instanceof e.Vector3?r:new e.Vector3,this.vertexNormals=r instanceof Array?r:[],this.material=s instanceof Array?s:[s]},e.Face4.prototype={toString:function(){return"THREE.Face4 ( "+this.a+", "+this.b+", "+this.c+" "+this.d+" )"}},e.UV=function(t,n){this.u=t||0,this.v=n||0},e.UV.prototype={copy:function(t){this.u=t.u,this.v=t.v},toString:function(){return"THREE.UV ("+this.u+", "+this.v+")"}},e.Geometry=function(){this.vertices=[],this.faces=[],this.uvs=[]},e.Geometry.prototype={computeCentroids:function(){var t,n,i;for(t=0,n=this.faces.length;t<n;t++)i=this.faces[t],i.centroid.set(0,0,0),i instanceof e.Face3?(i.centroid.addSelf(this.vertices[i.a].position),i.centroid.addSelf(this.vertices[i.b].position),i.centroid.addSelf(this.vertices[i.c].position),i.centroid.divideScalar(3)):i instanceof e.Face4&&(i.centroid.addSelf(this.vertices[i.a].position),i.centroid.addSelf(this.vertices[i.b].position),i.centroid.addSelf(this.vertices[i.c].position),i.centroid.addSelf(this.vertices[i.d].position),i.centroid.divideScalar(4))},computeNormals:function(t){var n,i,o,r,s,a,h,c,l,u,f,m=new e.Vector3,p=new e.Vector3;for(o=0,r=this.vertices.length;o<r;o++)s=this.vertices[o],s.normal.set(0,0,0);for(a=0,h=this.faces.length;a<h;a++)if(c=this.faces[a],t&&c.vertexNormals.length){for(m.set(0,0,0),n=0,i=c.normal.length;n<i;n++)m.addSelf(c.vertexNormals[n]);m.divideScalar(3),m.isZero()||m.normalize(),c.normal.copy(m)}else l=this.vertices[c.a],u=this.vertices[c.b],f=this.vertices[c.c],m.sub(f.position,u.position),p.sub(l.position,u.position),m.crossSelf(p),m.isZero()||m.normalize(),c.normal.copy(m)},computeBoundingBox:function(){if(this.vertices.length>0){this.bbox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]};for(var t=1,n=this.vertices.length;t<n;t++)vertex=this.vertices[t],vertex.position.x<this.bbox.x[0]?this.bbox.x[0]=vertex.position.x:vertex.position.x>this.bbox.x[1]&&(this.bbox.x[1]=vertex.position.x),vertex.position.y<this.bbox.y[0]?this.bbox.y[0]=vertex.position.y:vertex.position.y>this.bbox.y[1]&&(this.bbox.y[1]=vertex.position.y),vertex.position.z<this.bbox.z[0]?this.bbox.z[0]=vertex.position.z:vertex.position.z>this.bbox.z[1]&&(this.bbox.z[1]=vertex.position.z)}},toString:function(){return"THREE.Geometry ( vertices: "+this.vertices+", faces: "+this.faces+" )"}},e.Camera=function(t,n,i,o){this.fov=t,this.aspect=n,this.position=new e.Vector3(0,0,0),this.target={position:new e.Vector3(0,0,0)},this.projectionMatrix=e.Matrix4.makePerspective(t,n,i,o),this.up=new e.Vector3(0,1,0),this.matrix=new e.Matrix4,this.autoUpdateMatrix=!0,this.updateMatrix=function(){this.matrix.lookAt(this.position,this.target.position,this.up)},this.toString=function(){return"THREE.Camera ( "+this.position+", "+this.target.position+" )"}},e.Light=function(t){this.color=new e.Color(255<<24|t)},e.AmbientLight=function(t){e.Light.call(this,t)},e.AmbientLight.prototype=new e.Light,e.AmbientLight.prototype.constructor=e.AmbientLight,e.DirectionalLight=function(t,n){e.Light.call(this,t),this.position=new e.Vector3(0,1,0),this.intensity=n||1},e.DirectionalLight.prototype=new e.Light,e.DirectionalLight.prototype.constructor=e.DirectionalLight,e.PointLight=function(t,n){e.Light.call(this,t),this.position=new e.Vector3(0,0,0),this.intensity=n||1},e.DirectionalLight.prototype=new e.Light,e.DirectionalLight.prototype.constructor=e.PointLight,e.Object3D=function(t){this.position=new e.Vector3,this.rotation=new e.Vector3,this.scale=new e.Vector3(1,1,1),this.matrix=new e.Matrix4,this.matrixTranslation=new e.Matrix4,this.matrixRotation=new e.Matrix4,this.matrixScale=new e.Matrix4,this.screen=new e.Vector3,this.autoUpdateMatrix=!0,this.updateMatrix=function(){this.matrixPosition=e.Matrix4.translationMatrix(this.position.x,this.position.y,this.position.z),this.matrixRotation=e.Matrix4.rotationXMatrix(this.rotation.x),this.matrixRotation.multiplySelf(e.Matrix4.rotationYMatrix(this.rotation.y)),this.matrixRotation.multiplySelf(e.Matrix4.rotationZMatrix(this.rotation.z)),this.matrixScale=e.Matrix4.scaleMatrix(this.scale.x,this.scale.y,this.scale.z),this.matrix.copy(this.matrixPosition),this.matrix.multiplySelf(this.matrixRotation),this.matrix.multiplySelf(this.matrixScale)}},e.Particle=function(t){e.Object3D.call(this),this.material=t instanceof Array?t:[t],this.autoUpdateMatrix=!1},e.Particle.prototype=new e.Object3D,e.Particle.prototype.constructor=e.Particle,e.Line=function(t,n){e.Object3D.call(this),this.geometry=t,this.material=n instanceof Array?n:[n]},e.Line.prototype=new e.Object3D,e.Line.prototype.constructor=e.Line,e.Mesh=function(t,n,i){e.Object3D.call(this),this.geometry=t,this.material=n instanceof Array?n:[n],this.flipSided=!1,this.doubleSided=!1,this.overdraw=!1,this.materialFaceGroup={},this.sortFacesByMaterial(),i&&this.normalizeUVs(),this.geometry.computeBoundingBox()},e.Mesh.prototype=new e.Object3D,e.Mesh.prototype.constructor=e.Mesh,e.Mesh.prototype.sortFacesByMaterial=function(){var t,n,i,e,o,r,s;for(i=0,e=this.geometry.faces.length;i<e;i++)o=this.geometry.faces[i],r=o.material,hash=function(i){for(s=[],t=0,n=i.length;t<n;t++)void 0==i[t]?s.push("undefined"):s.push(i[t].toString());return s.join("_")}(r),void 0==this.materialFaceGroup[hash]&&(this.materialFaceGroup[hash]={faces:[],material:r}),this.materialFaceGroup[hash].faces.push(i)},e.Mesh.prototype.normalizeUVs=function(){var t,n,i,e,o;for(t=0,n=this.geometry.uvs.length;t<n;t++)for(o=this.geometry.uvs[t],i=0,e=o.length;i<e;i++)1!=o[i].u&&(o[i].u=o[i].u-Math.floor(o[i].u)),1!=o[i].v&&(o[i].v=o[i].v-Math.floor(o[i].v))},e.LineColorMaterial=function(t,n,i){this.lineWidth=i||1,this.color=new e.Color((n>=0?255*n<<24:4278190080)|t)},e.LineColorMaterial.prototype={toString:function(){return"THREE.LineColorMaterial ( color: "+this.color+", lineWidth: "+this.lineWidth+" )"}},e.MeshPhongMaterial=function(t,n,i,o,r){this.ambient=new e.Color((r>=0?255*r<<24:4278190080)|t),this.diffuse=new e.Color((r>=0?255*r<<24:4278190080)|n),this.specular=new e.Color((r>=0?255*r<<24:4278190080)|i),this.shininess=o,this.opacity=r,this.toString=function(){return"THREE.MeshPhongMaterial ( <br/>ambient: "+this.ambient+", <br/>diffuse: "+this.diffuse+", <br/>specular: "+this.specular+", <br/>shininess: "+this.shininess+", <br/>opacity: "+this.opacity+")"}},e.MeshBitmapMaterial=function(t,n){this.bitmap=t,this.mode=n||e.MeshBitmapMaterialMode.UVMAPPING,this.id=e.MeshBitmapMaterialCounter.value++,this.toString=function(){return"THREE.MeshBitmapMaterial ( bitmap: "+this.bitmap+", mode: "+this.mode+", id: "+this.id+" )"}},e.MeshBitmapMaterialCounter={value:0},e.MeshBitmapMaterialMode={UVMAPPING:0},e.MeshColorFillMaterial=function(t,n){this.color=new e.Color((n>=0?255*n<<24:4278190080)|t),this.toString=function(){return"THREE.MeshColorFillMaterial ( color: "+this.color+" )"}},e.MeshColorStrokeMaterial=function(t,n,i){this.lineWidth=i||1,this.color=new e.Color((n>=0?255*n<<24:4278190080)|t),this.toString=function(){return"THREE.MeshColorStrokeMaterial ( lineWidth: "+this.lineWidth+", color: "+this.color+" )"}},e.MeshFaceMaterial=function(){this.toString=function(){return"THREE.MeshFaceMaterial"}},e.ParticleBitmapMaterial=function(t){this.bitmap=t,this.offset=new e.Vector2,this.toString=function(){return"THREE.ParticleBitmapMaterial ( bitmap: "+this.bitmap+" )"}},e.ParticleCircleMaterial=function(t,n){this.color=new e.Color((n>=0?255*n<<24:4278190080)|t),this.toString=function(){return"THREE.ParticleCircleMaterial ( color: "+this.color+" )"}},e.ParticleDOMMaterial=function(t){this.domElement=t,this.toString=function(){return"THREE.ParticleDOMMaterial ( domElement: "+this.domElement+" )"}},e.Scene=function(){this.objects=[],this.lights=[],this.addObject=function(t){this.objects.push(t)},this.removeObject=function(t){for(var n=0,i=this.objects.length;n<i;n++)if(t==this.objects[n])return void this.objects.splice(n,1)},this.addLight=function(t){this.lights.push(t)},this.removeLight=function(t){for(var n=0,i=this.lights.length;n<i;n++)if(t==this.lights[n])return void this.lights.splice(n,1)},this.add=function(t){this.addObject(t)},this.toString=function(){return"THREE.Scene ( "+this.objects+" )"}},e.Projector=function(){var t,n,i,o,r,s,a,h,c=null,l=[],u=[],f=[],m=[],p=new e.Vector4,g=new e.Matrix4,x=new e.Matrix4;this.projectScene=function(y,d){var v,M,b,S,w,R,z,_,A,L,P,E,B,T,C,V,F,D,G;for(c=[],n=0,o=0,s=0,h=0,d.autoUpdateMatrix&&d.updateMatrix(),g.multiply(d.projectionMatrix,d.matrix),z=y.objects,v=0,M=z.length;v<M;v++)if(_=z[v],A=_.matrix,_.autoUpdateMatrix&&_.updateMatrix(),_ instanceof e.Mesh){for(x.multiply(g,A),L=_.geometry.vertices,b=0,S=L.length;b<S;b++)P=L[b],E=P.positionScreen,E.copy(P.position),x.transform(E),P.__visible=E.z>0&&E.z<1;for(T=_.geometry.faces,w=0,R=T.length;w<R;w++)C=T[w],C instanceof e.Face3?(V=L[C.a],F=L[C.b],D=L[C.c],V.__visible&&F.__visible&&D.__visible&&(_.doubleSided||_.flipSided!=(D.positionScreen.x-V.positionScreen.x)*(F.positionScreen.y-V.positionScreen.y)-(D.positionScreen.y-V.positionScreen.y)*(F.positionScreen.x-V.positionScreen.x)<0)&&(t=l[n]=l[n]||new e.RenderableFace3,t.v1.copy(V.positionScreen),t.v2.copy(F.positionScreen),t.v3.copy(D.positionScreen),t.centroidWorld.copy(C.centroid),_.matrix.transform(t.centroidWorld),t.normalWorld.copy(C.normal),_.matrixRotation.transform(t.normalWorld),t.z=Math.max(V.positionScreen.z,Math.max(F.positionScreen.z,D.positionScreen.z)),t.meshMaterial=_.material,t.faceMaterial=C.material,t.overdraw=_.overdraw,t.uvs=_.geometry.uvs[w],t.color=C.color,c.push(t),n++)):C instanceof e.Face4&&(V=L[C.a],F=L[C.b],D=L[C.c],G=L[C.d],V.__visible&&F.__visible&&D.__visible&&G.__visible&&(_.doubleSided||_.flipSided!=((G.positionScreen.x-V.positionScreen.x)*(F.positionScreen.y-V.positionScreen.y)-(G.positionScreen.y-V.positionScreen.y)*(F.positionScreen.x-V.positionScreen.x)<0||(F.positionScreen.x-D.positionScreen.x)*(G.positionScreen.y-D.positionScreen.y)-(F.positionScreen.y-D.positionScreen.y)*(G.positionScreen.x-D.positionScreen.x)<0))&&(i=u[o]=u[o]||new e.RenderableFace4,i.v1.copy(V.positionScreen),i.v2.copy(F.positionScreen),i.v3.copy(D.positionScreen),i.v4.copy(G.positionScreen),i.centroidWorld.copy(C.centroid),_.matrix.transform(i.centroidWorld),i.normalWorld.copy(C.normal),_.matrixRotation.transform(i.normalWorld),i.z=Math.max(V.positionScreen.z,Math.max(F.positionScreen.z,Math.max(D.positionScreen.z,G.positionScreen.z))),i.meshMaterial=_.material,i.faceMaterial=C.material,i.overdraw=_.overdraw,i.uvs=_.geometry.uvs[w],i.color=C.color,c.push(i),o++))}else if(_ instanceof e.Line)for(x.multiply(g,A),L=_.geometry.vertices,b=0,S=L.length;b<S;b++)P=L[b],E=P.positionScreen,E.copy(P.position),x.transform(E),P.__visible=E.z>0&&E.z<1,b>0&&(B=_.geometry.vertices[b-1],P.__visible&&B.__visible&&(r=f[s]=f[s]||new e.RenderableLine,r.v1.copy(P.positionScreen),r.v2.copy(B.positionScreen),r.z=Math.max(P.positionScreen.z,B.positionScreen.z),r.material=_.material,c.push(r),s++));else _ instanceof e.Particle&&(p.set(_.position.x,_.position.y,_.position.z,1),d.matrix.transform(p),d.projectionMatrix.transform(p),_.screen.set(p.x/p.w,p.y/p.w,p.z/p.w),_.screen.z>0&&_.screen.z<1&&(a=m[h]=m[h]||new e.RenderableParticle,a.x=_.screen.x,a.y=_.screen.y,a.z=_.screen.z,a.rotation=_.rotation.z,a.scale.x=_.scale.x*Math.abs(p.x/p.w-(p.x+d.projectionMatrix.n11)/(p.w+d.projectionMatrix.n14)),a.scale.y=_.scale.y*Math.abs(p.y/p.w-(p.y+d.projectionMatrix.n22)/(p.w+d.projectionMatrix.n24)),a.material=_.material,a.color=_.color,c.push(a),h++));return c.sort(function(t,n){return n.z-t.z}),c}},e.DOMRenderer=function(){e.Renderer.call(this);var t,n,i,o,r=null,s=new e.Projector,a=document.createElement("div");this.domElement=a,this.setSize=function(e,r){t=e,n=r,i=t/2,o=n/2},this.render=function(t,n){var a,h,c,l,u,f,m,p,g;for(r=s.projectScene(t,n),a=0,h=r.length;a<h;a++)if((u=r[a])instanceof e.RenderableParticle)for(p=u.x*i+i,g=u.y*o+o,c=0,l=u.material.length;c<l;c++)(f=u.material[c])instanceof e.ParticleDOMMaterial&&(m=f.domElement,m.style.left=p+"px",m.style.top=g+"px")}},e.CanvasRenderer=function(){function t(t,n){var i,o,r;for(n.setRGBA(1,1,1,1),i=0,o=t.lights.length;i<o;i++)(r=t.lights[i])instanceof e.AmbientLight&&(n.r*=r.color.r,n.g*=r.color.g,n.b*=r.color.b)}function n(t,n,i){var o,r,s;for(o=0,r=t.lights.length;o<r;o++)s=t.lights[o],s instanceof e.DirectionalLight?(i.r+=s.color.r,i.g+=s.color.g,i.b+=s.color.b):s instanceof e.PointLight&&(i.r+=s.color.r,i.g+=s.color.g,i.b+=s.color.b)}function i(t,n,i){var o,r,s,a;for(o=0,r=t.lights.length;o<r;o++)s=t.lights[o],s instanceof e.DirectionalLight?(a=n.normalWorld.dot(s.position)*s.intensity)>0&&(i.r+=s.color.r*a,i.g+=s.color.g*a,i.b+=s.color.b*a):s instanceof e.PointLight&&(A.sub(s.position,n.centroidWorld),A.normalize(),(a=n.normalWorld.dot(A)*s.intensity)>0&&(i.r+=s.color.r*a,i.g+=s.color.g*a,i.b+=s.color.b*a))}function o(t,i,o,r,s){var a,h,c,l,u,p,g,x,v;if(r instanceof e.ParticleCircleMaterial){if(b?(w.copyRGB(R),n(s,o,w),S.copyRGBA(r.color),S.multiplySelfRGB(w),S.updateStyleString()):S=r.color,a=o.scale.x*f,h=o.scale.y*m,M.set(t-a,i-h,t+a,i+h),!d.instersects(M))return;y.save(),y.translate(t,i),y.rotate(-o.rotation),y.scale(a,h),y.beginPath(),y.arc(0,0,1,0,z,!0),y.closePath(),y.fillStyle=S.__styleString,y.fill(),y.restore()}else if(r instanceof e.ParticleBitmapMaterial){if(g=r.bitmap,x=g.width/2,v=g.height/2,c=o.scale.x*f,l=o.scale.y*m,a=c*x,h=l*v,u=r.offset.x*c,p=r.offset.y*l,M.set(t+u-a,i+p-h,t+u+a,i+p+h),!d.instersects(M))return;y.save(),y.translate(t,i),y.rotate(-o.rotation),y.scale(c,-l),y.translate(-x+r.offset.x,-v-r.offset.y),y.drawImage(g,0,0),y.restore()}}function r(t,i,o,r,s,a,h){a instanceof e.LineColorMaterial&&(b?(w.copyRGB(R),n(h,s,w),S.copyRGBA(a.color),S.multiplySelfRGB(w),S.updateStyleString()):S=a.color,y.lineWidth=a.lineWidth,y.lineJoin="round",y.lineCap="round",y.strokeStyle=S.__styleString,y.stroke(),M.inflate(y.lineWidth))}function s(t,n,o,r,s,a,c,l,u){var f,m,p;l instanceof e.MeshColorFillMaterial?(b?(w.copyRGB(R),i(u,c,w),S.copyRGBA(l.color),S.multiplySelfRGB(w),S.updateStyleString()):S=l.color,y.beginPath(),y.moveTo(t,n),y.lineTo(o,r),y.lineTo(s,a),y.lineTo(t,n),y.closePath(),y.fillStyle=S.__styleString,y.fill()):l instanceof e.MeshColorStrokeMaterial?(b?(w.copyRGB(R),i(u,c,w),S.copyRGBA(l.color),S.multiplySelfRGB(w),S.updateStyleString()):S=l.color,y.beginPath(),y.moveTo(t,n),y.lineTo(o,r),y.lineTo(s,a),y.lineTo(t,n),y.closePath(),y.lineWidth=l.lineWidth,y.lineJoin="round",y.lineCap="round",y.strokeStyle=S.__styleString,y.stroke(),M.inflate(y.lineWidth)):l instanceof e.MeshBitmapMaterial&&(f=l.bitmap,m=f.width-1,p=f.height-1,L.copy(c.uvs[0]),P.copy(c.uvs[1]),E.copy(c.uvs[2]),L.u*=m,L.v*=p,P.u*=m,P.v*=p,E.u*=m,E.v*=p,h(f,t,n,o,r,s,a,L.u,L.v,P.u,P.v,E.u,E.v))}function a(t,n,o,r,s,a,c,l,u,f,m,p,g,x,d){var v,z,_;x instanceof e.MeshColorFillMaterial?(b?(w.copyRGB(R),i(d,g,w),S.copyRGBA(x.color),S.multiplySelfRGB(w),S.updateStyleString()):S=x.color,y.beginPath(),y.moveTo(t,n),y.lineTo(o,r),y.lineTo(s,a),y.lineTo(c,l),y.lineTo(t,n),y.closePath(),y.fillStyle=S.__styleString,y.fill()):x instanceof e.MeshColorStrokeMaterial?(b?(w.copyRGB(R),i(d,g,w),S.copyRGBA(x.color),S.multiplySelfRGB(w),S.updateStyleString()):S=x.color,y.beginPath(),y.moveTo(t,n),y.lineTo(o,r),y.lineTo(s,a),y.lineTo(c,l),y.lineTo(t,n),y.closePath(),y.lineWidth=x.lineWidth,y.lineJoin="round",y.lineCap="round",y.strokeStyle=S.__styleString,y.stroke(),M.inflate(y.lineWidth)):x instanceof e.MeshBitmapMaterial&&(v=x.bitmap,z=v.width-1,_=v.height-1,L.copy(g.uvs[0]),P.copy(g.uvs[1]),E.copy(g.uvs[2]),B.copy(g.uvs[3]),L.u*=z,L.v*=_,P.u*=z,P.v*=_,E.u*=z,E.v*=_,B.u*=z,B.v*=_,h(v,t,n,o,r,c,l,L.u,L.v,P.u,P.v,B.u,B.v),h(v,u,f,s,a,m,p,P.u,P.v,E.u,E.v,B.u,B.v))}function h(t,n,i,e,o,r,s,a,h,c,l,u,f){var m,p,g,x,d,v,M;y.beginPath(),y.moveTo(n,i),y.lineTo(e,o),y.lineTo(r,s),y.lineTo(n,i),y.closePath(),y.save(),y.clip(),m=a*(f-l)-c*f+u*l+(c-u)*h,p=-(h*(r-e)-l*r+f*e+(l-f)*n)/m,g=(l*s+h*(o-s)-f*o+(f-l)*i)/m,x=(a*(r-e)-c*r+u*e+(c-u)*n)/m,d=-(c*s+a*(o-s)-u*o+(u-c)*i)/m,v=(a*(f*e-l*r)+h*(c*r-u*e)+(u*l-c*f)*n)/m,M=(a*(f*o-l*s)+h*(c*s-u*o)+(u*l-c*f)*i)/m,y.transform(p,g,x,d,v,M),y.drawImage(t,0,0),y.restore()}function c(t,n){_.sub(n,t),_.unit(),_.multiplyScalar(.75),n.addSelf(_),t.subSelf(_)}var l,u,f,m,p=null,g=new e.Projector,x=document.createElement("canvas"),y=x.getContext("2d"),d=new e.Rectangle,v=new e.Rectangle,M=new e.Rectangle,b=!1,S=new e.Color(4294967295),w=new e.Color(4294967295),R=new e.Color(4294967295),z=2*Math.PI,_=new e.Vector2,A=new e.Vector3,L=new e.UV,P=new e.UV,E=new e.UV,B=new e.UV,T=new e.Vector2,C=new e.Vector2;this.domElement=x,this.autoClear=!0,this.setSize=function(t,n){l=t,u=n,f=l/2,m=u/2,x.width=l,x.height=u,d.set(-f,-m,f,m)},this.clear=function(){v.isEmpty()||(v.inflate(1),v.minSelf(d),y.setTransform(1,0,0,-1,f,m),y.clearRect(v.getX(),v.getY(),v.getWidth(),v.getHeight()),v.empty())},this.render=function(n,i){var h,l,u,x,S,w,z,_,A,L,P,E,B,V,F,D,G,U,W,j;for(this.autoClear&&this.clear(),p=g.projectScene(n,i),y.setTransform(1,0,0,-1,f,m),b=n.lights.length>0,b&&t(n,R),h=0,l=p.length;h<l;h++){if(u=p[h],M.empty(),u instanceof e.RenderableParticle)for(A=u.x*f,L=u.y*m,x=0,S=u.material.length;x<S;x++)_=u.material[x],o(A,L,u,_,n);else if(u instanceof e.RenderableLine){if(A=u.v1.x*f,L=u.v1.y*m,P=u.v2.x*f,E=u.v2.y*m,M.addPoint(A,L),M.addPoint(P,E),!d.instersects(M))continue;for(y.beginPath(),y.moveTo(A,L),y.lineTo(P,E),y.closePath(),x=0,S=u.material.length;x<S;x++)_=u.material[x],r(A,L,P,E,u,_,n)}else if(u instanceof e.RenderableFace3){if(u.v1.x*=f,u.v1.y*=m,u.v2.x*=f,u.v2.y*=m,u.v3.x*=f,u.v3.y*=m,u.overdraw&&(c(u.v1,u.v2),c(u.v2,u.v3),c(u.v3,u.v1)),A=u.v1.x,L=u.v1.y,P=u.v2.x,E=u.v2.y,B=u.v3.x,V=u.v3.y,M.addPoint(A,L),M.addPoint(P,E),M.addPoint(B,V),!d.instersects(M))continue;for(x=0,S=u.meshMaterial.length;x<S;)if((_=u.meshMaterial[x++])instanceof e.MeshFaceMaterial)for(w=0,z=u.faceMaterial.length;w<z;)_=u.faceMaterial[w++],s(A,L,P,E,B,V,u,_,n);else s(A,L,P,E,B,V,u,_,n)}else if(u instanceof e.RenderableFace4){if(u.v1.x*=f,u.v1.y*=m,u.v2.x*=f,u.v2.y*=m,u.v3.x*=f,u.v3.y*=m,u.v4.x*=f,u.v4.y*=m,T.copy(u.v2),C.copy(u.v4),u.overdraw&&(c(u.v1,u.v2),c(u.v2,u.v4),c(u.v4,u.v1)),A=u.v1.x,L=u.v1.y,P=u.v2.x,E=u.v2.y,F=u.v4.x,D=u.v4.y,u.overdraw&&(c(u.v3,T),c(u.v3,C)),B=u.v3.x,V=u.v3.y,G=T.x,U=T.y,W=C.x,j=C.y,M.addPoint(A,L),M.addPoint(P,E),M.addPoint(B,V),M.addPoint(F,D),!d.instersects(M))continue;for(x=0,S=u.meshMaterial.length;x<S;)if((_=u.meshMaterial[x++])instanceof e.MeshFaceMaterial)for(w=0,z=u.faceMaterial.length;w<z;)_=u.faceMaterial[w++],a(A,L,P,E,B,V,F,D,G,U,W,j,u,_,n);else a(A,L,P,E,B,V,F,D,G,U,W,j,u,_,n)}v.addRectangle(M)}y.setTransform(1,0,0,1,0,0)}},e.SVGRenderer=function(){function t(t,n){var i,o,r;for(n.setRGBA(1,1,1,1),i=0,o=t.lights.length;i<o;i++)(r=t.lights[i])instanceof e.AmbientLight&&(n.r*=r.color.r,n.g*=r.color.g,n.b*=r.color.b)}function n(t,n,i){var o,r,s;for(o=0,r=t.lights.length;o<r;o++)s=t.lights[o],s instanceof e.DirectionalLight?(i.r+=s.color.r,i.g+=s.color.g,i.b+=s.color.b):s instanceof e.PointLight&&(i.r+=s.color.r,i.g+=s.color.g,i.b+=s.color.b)}function i(t,n,i){var o,r,s,a;for(o=0,r=t.lights.length;o<r;o++)s=t.lights[o],s instanceof e.DirectionalLight?(a=n.normalWorld.dot(s.position)*s.intensity)>0&&(i.r+=s.color.r*a,i.g+=s.color.g*a,i.b+=s.color.b*a):s instanceof e.PointLight&&(z.sub(s.position,n.centroidWorld),z.normalize(),(a=n.normalWorld.dot(z)*s.intensity)>0&&(i.r+=s.color.r*a,i.g+=s.color.g*a,i.b+=s.color.b*a))}function o(t,i,o,r,s){m=h(g++),m.setAttribute("cx",t),m.setAttribute("cy",i),m.setAttribute("r",o.scale.x*u),r instanceof e.ParticleCircleMaterial&&(b?(w.copyRGB(R),n(s,o,w),S.copyRGBA(r.color),S.multiplySelfRGB(w),S.updateStyleString()):S=r.color,m.setAttribute("style","fill: "+S.__styleString)),d.appendChild(m)}function r(t,n,o,r,s,h,c,l,u){m=a(p++),m.setAttribute("d","M "+t+" "+n+" L "+o+" "+r+" L "+s+","+h+"z"),l instanceof e.MeshColorFillMaterial?(b?(w.copyRGB(R),i(u,c,w),S.copyRGBA(l.color),S.multiplySelfRGB(w),S.updateStyleString()):S=l.color,m.setAttribute("style","fill: "+S.__styleString)):l instanceof e.MeshColorStrokeMaterial&&(b?(w.copyRGB(R),i(u,c,w),S.copyRGBA(l.color),S.multiplySelfRGB(w),S.updateStyleString()):S=l.color,m.setAttribute("style","fill: none; stroke: "+S.__styleString+"; stroke-width: "+l.lineWidth+"; stroke-linecap: round; stroke-linejoin: round")),d.appendChild(m)}function s(t,n,o,r,s,h,c,l,u,f,g){m=a(p++),m.setAttribute("d","M "+t+" "+n+" L "+o+" "+r+" L "+s+","+h+" L "+c+","+l+"z"),f instanceof e.MeshColorFillMaterial?(b?(w.copyRGB(R),i(g,u,w),S.copyRGBA(f.color),S.multiplySelfRGB(w),S.updateStyleString()):S=f.color,m.setAttribute("style","fill: "+S.__styleString)):f instanceof e.MeshColorStrokeMaterial&&(b?(w.copyRGB(R),i(g,u,w),S.copyRGBA(f.color),S.multiplySelfRGB(w),S.updateStyleString()):S=f.color,m.setAttribute("style","fill: none; stroke: "+S.__styleString+"; stroke-width: "+f.lineWidth+"; stroke-linecap: round; stroke-linejoin: round")),d.appendChild(m)}function a(t){return null==_[t]?(_[t]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==L&&_[t].setAttribute("shape-rendering","crispEdges"),_[t]):_[t]}function h(t){return null==A[t]?(A[t]=document.createElementNS("http://www.w3.org/2000/svg","circle"),0==L&&A[t].setAttribute("shape-rendering","crispEdges"),A[t]):A[t]}var c,l,u,f,m,p,g,x=null,y=new e.Projector,d=document.createElementNS("http://www.w3.org/2000/svg","svg"),v=new e.Rectangle,M=new e.Rectangle,b=!1,S=new e.Color(4294967295),w=new e.Color(4294967295),R=new e.Color(4294967295),z=new e.Vector3,_=[],A=[],L=1;this.domElement=d,this.autoClear=!0,this.setQuality=function(t){switch(t){case"high":L=1;break;case"low":L=0}},this.setSize=function(t,n){c=t,l=n,u=c/2,f=l/2,d.setAttribute("viewBox",-u+" "+-f+" "+c+" "+l),d.setAttribute("width",c),d.setAttribute("height",l),v.set(-u,-f,u,f)},this.clear=function(){for(;d.childNodes.length>0;)d.removeChild(d.childNodes[0])},this.render=function(n,i){var a,h,c,l,m,d,S,w,z,_,A,L,P,E,B,T;for(this.autoClear&&this.clear(),x=y.projectScene(n,i),p=0,g=0,b=n.lights.length>0,b&&t(n,R),a=0,h=x.length;a<h;a++)if(S=x[a],M.empty(),S instanceof e.RenderableParticle)for(z=S.x*u,_=S.y*-f,c=0,l=S.material.length;c<l;c++)w=S.material[c],o(z,_,S,w,n);else if(S instanceof e.RenderableFace3){if(z=S.v1.x*u,_=S.v1.y*-f,A=S.v2.x*u,L=S.v2.y*-f,P=S.v3.x*u,E=S.v3.y*-f,M.addPoint(z,_),M.addPoint(A,L),M.addPoint(P,E),!v.instersects(M))continue;for(c=0,l=S.meshMaterial.length;c<l;)if((w=S.meshMaterial[c++])instanceof e.MeshFaceMaterial)for(m=0,d=S.faceMaterial.length;m<d;)w=S.faceMaterial[m++],r(z,_,A,L,P,E,S,w,n);else r(z,_,A,L,P,E,S,w,n)}else if(S instanceof e.RenderableFace4){if(z=S.v1.x*u,_=S.v1.y*-f,A=S.v2.x*u,L=S.v2.y*-f,P=S.v3.x*u,E=S.v3.y*-f,B=S.v4.x*u,T=S.v4.y*-f,M.addPoint(z,_),M.addPoint(A,L),M.addPoint(P,E),M.addPoint(B,T),!v.instersects(M))continue;for(c=0,l=S.meshMaterial.length;c<l;)if((w=S.meshMaterial[c++])instanceof e.MeshFaceMaterial)for(m=0,d=S.faceMaterial.length;m<d;)w=S.faceMaterial[m++],s(z,_,A,L,P,E,B,T,S,w,n);else s(z,_,A,L,P,E,B,T,S,w,n)}}},e.WebGLRenderer=function(){function t(t,i){var e;return"fragment"==t?e=n.createShader(n.FRAGMENT_SHADER):"vertex"==t&&(e=n.createShader(n.VERTEX_SHADER)),n.shaderSource(e,i),n.compileShader(e),n.getShaderParameter(e,n.COMPILE_STATUS)?e:(alert(n.getShaderInfoLog(e)),null)}var n,i,o,r=document.createElement("canvas"),s=new e.Matrix4;this.domElement=r,this.autoClear=!0,function(){try{n=r.getContext("experimental-webgl",{antialias:!0})}catch(t){}if(!n)throw alert("WebGL not supported"),"cannot create webgl context";n.clearColor(0,0,0,1),n.clearDepth(1),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.clearColor(0,0,0,0)}(),function(){i=n.createProgram(),n.attachShader(i,t("fragment",["#ifdef GL_ES","precision highp float;","#endif","uniform sampler2D diffuse;","uniform vec4 uniformColor;","varying vec2 vertexUv;","varying vec3 lightWeighting;","varying vec3 vNormal;","uniform int material;","uniform vec4 mAmbient;","uniform vec4 mDiffuse;","uniform vec4 mSpecular;","uniform float mShininess;","varying vec3 pLightVectorPoint;","varying vec3 pLightVectorDirection;","varying vec3 pViewPosition;","void main(){","if(material==3) { ","vec3 lightVectorPoint = normalize(pLightVectorPoint);","vec3 lightVectorDir = normalize(pLightVectorDirection);","vec3 normal = normalize(vNormal);","vec3 viewPosition = normalize(pViewPosition);","vec3 halfVectorPoint = normalize(pLightVectorPoint + pViewPosition);","float dotNormalHalfPoint = dot(normal, halfVectorPoint);","float ambientCompPoint = 1.0;","float diffuseCompPoint = max(dot(normal, lightVectorPoint), 0.0);","float specularCompPoint = pow(dotNormalHalfPoint, mShininess);","vec4 ambientPoint  = mAmbient * ambientCompPoint;","vec4 diffusePoint  = mDiffuse * diffuseCompPoint;","vec4 specularPoint = mSpecular * specularCompPoint;","vec3 halfVectorDir = normalize(pLightVectorDirection + pViewPosition);","float dotNormalHalfDir = dot(normal, halfVectorDir);","float ambientCompDir = 1.0;","float diffuseCompDir = max(dot(normal, lightVectorDir), 0.0);","float specularCompDir = pow(dotNormalHalfDir, mShininess);","vec4 ambientDir  = mAmbient * ambientCompDir;","vec4 diffuseDir  = mDiffuse * diffuseCompDir;","vec4 specularDir = mSpecular * specularCompDir;","vec4 pointLight = ambientPoint + diffusePoint + specularPoint;","vec4 dirLight = ambientDir + diffuseDir + specularDir;","gl_FragColor = vec4((pointLight.xyz + dirLight.xyz) * lightWeighting, 1.0);","} else if(material==2) {","vec4 texelColor = texture2D(diffuse, vertexUv);","gl_FragColor = vec4(texelColor.rgb * lightWeighting, texelColor.a);","} else if(material==1) {","gl_FragColor = vec4(uniformColor.rgb * lightWeighting, uniformColor.a);","} else {","gl_FragColor = vec4(uniformColor.rgb * lightWeighting, uniformColor.a);","}","}"].join("\n"))),n.attachShader(i,t("vertex",["attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","uniform bool enableLighting;","uniform vec3 ambientColor;","uniform vec3 directionalColor;","uniform vec3 lightingDirection;","uniform vec3 pointColor;","uniform vec3 pointPosition;","uniform mat4 objMatrix;","uniform mat4 viewMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat3 normalMatrix;","varying vec4 vertexColor;","varying vec2 vertexUv;","varying vec3 lightWeighting;","varying vec3 vNormal;","varying vec3 pLightVectorPoint;","varying vec3 pLightVectorDirection;","varying vec3 pViewPosition;","uniform vec3 cameraPosition;","void main(void) {","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec3 transformedNormal = normalize(normalMatrix * normal);","vec4 lPosition = viewMatrix * vec4( pointPosition, 1.0 );","vec4 lDirection = viewMatrix * vec4( lightingDirection, 0.0 );","pLightVectorPoint = normalize(pointPosition.xyz - position.xyz);","pLightVectorDirection = normalize(lDirection.xyz);","vec4 mPosition = objMatrix * vec4( position, 1.0 );","pViewPosition = cameraPosition - mPosition.xyz;","if(!enableLighting) {","lightWeighting = vec3(1.0, 1.0, 1.0);","} else {","vec3 pointLight = normalize(lPosition.xyz - mvPosition.xyz);","float directionalLightWeighting = max(dot(transformedNormal, normalize(lDirection.xyz)), 0.0);","float pointLightWeighting = max(dot(transformedNormal, pointLight), 0.0);","lightWeighting = ambientColor + directionalColor * directionalLightWeighting + pointColor * pointLightWeighting;","}","vNormal = transformedNormal;","vertexUv = uv;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"))),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||alert("Could not initialise shaders"),n.useProgram(i),i.viewMatrix=n.getUniformLocation(i,"viewMatrix"),i.modelViewMatrix=n.getUniformLocation(i,"modelViewMatrix"),i.projectionMatrix=n.getUniformLocation(i,"projectionMatrix"),i.normalMatrix=n.getUniformLocation(i,"normalMatrix"),i.objMatrix=n.getUniformLocation(i,"objMatrix"),i.enableLighting=n.getUniformLocation(i,"enableLighting"),i.ambientColor=n.getUniformLocation(i,"ambientColor"),i.directionalColor=n.getUniformLocation(i,"directionalColor"),i.lightingDirection=n.getUniformLocation(i,"lightingDirection"),i.pointColor=n.getUniformLocation(i,"pointColor"),i.pointPosition=n.getUniformLocation(i,"pointPosition"),i.material=n.getUniformLocation(i,"material"),i.uniformColor=n.getUniformLocation(i,"uniformColor"),i.mAmbient=n.getUniformLocation(i,"mAmbient"),i.mDiffuse=n.getUniformLocation(i,"mDiffuse"),i.mSpecular=n.getUniformLocation(i,"mSpecular"),i.mShininess=n.getUniformLocation(i,"mShininess"),i.cameraPosition=n.getUniformLocation(i,"cameraPosition"),i.position=n.getAttribLocation(i,"position"),n.enableVertexAttribArray(i.position),i.normal=n.getAttribLocation(i,"normal"),n.enableVertexAttribArray(i.normal),i.uv=n.getAttribLocation(i,"uv"),n.enableVertexAttribArray(i.uv),i.diffuse=n.getUniformLocation(i,"diffuse"),n.uniform1i(i.diffuse,0),i.viewMatrixArray=new Float32Array(16),i.modelViewMatrixArray=new Float32Array(16),i.projectionMatrixArray=new Float32Array(16)}(),this.setSize=function(t,i){r.width=t,r.height=i,n.viewport(0,0,r.width,r.height)},this.clear=function(){n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},this.setupLights=function(t){var o,r,s,a,h,c;for(n.uniform1i(i.enableLighting,t.lights.length),o=0,r=t.lights.length;o<r;o++)c=t.lights[o],c instanceof e.AmbientLight?(s=c.color,n.uniform3f(i.ambientColor,s.r,s.g,s.b)):c instanceof e.DirectionalLight?(s=c.color,a=c.position,h=c.intensity,n.uniform3f(i.lightingDirection,a.x,a.y,a.z),n.uniform3f(i.directionalColor,s.r*h,s.g*h,s.b*h)):c instanceof e.PointLight&&(s=c.color,a=c.position,h=c.intensity,n.uniform3f(i.pointPosition,a.x,a.y,a.z),n.uniform3f(i.pointColor,s.r*h,s.g*h,s.b*h))},this.createBuffers=function(t,i){var o,r,s,a,h,c,l,u,f,m,p,g=t.materialFaceGroup[i],x=[],y=[],d=[],v=[],M=[],b=0;for(o=0,r=g.faces.length;o<r;o++)s=g.faces[o],a=t.geometry.faces[s],h=a.vertexNormals,c=a.normal,l=t.geometry.uvs[s],a instanceof e.Face3?(u=t.geometry.vertices[a.a].position,f=t.geometry.vertices[a.b].position,m=t.geometry.vertices[a.c].position,d.push(u.x,u.y,u.z),d.push(f.x,f.y,f.z),d.push(m.x,m.y,m.z),3==h.length?(v.push(h[0].x,h[0].y,h[0].z),v.push(h[1].x,h[1].y,h[1].z),v.push(h[2].x,h[2].y,h[2].z)):(v.push(c.x,c.y,c.z),v.push(c.x,c.y,c.z),v.push(c.x,c.y,c.z)),l&&(M.push(l[0].u,l[0].v),M.push(l[1].u,l[1].v),M.push(l[2].u,l[2].v)),x.push(b,b+1,b+2),y.push(b,b+1),y.push(b,b+2),y.push(b+1,b+2),b+=3):a instanceof e.Face4&&(u=t.geometry.vertices[a.a].position,f=t.geometry.vertices[a.b].position,m=t.geometry.vertices[a.c].position,p=t.geometry.vertices[a.d].position,d.push(u.x,u.y,u.z),d.push(f.x,f.y,f.z),d.push(m.x,m.y,m.z),d.push(p.x,p.y,p.z),4==h.length?(v.push(h[0].x,h[0].y,h[0].z),v.push(h[1].x,h[1].y,h[1].z),v.push(h[2].x,h[2].y,h[2].z),v.push(h[3].x,h[3].y,h[3].z)):(v.push(c.x,c.y,c.z),v.push(c.x,c.y,c.z),v.push(c.x,c.y,c.z),v.push(c.x,c.y,c.z)),l&&(M.push(l[0].u,l[0].v),M.push(l[1].u,l[1].v),M.push(l[2].u,l[2].v),M.push(l[3].u,l[3].v)),x.push(b,b+1,b+2),x.push(b,b+2,b+3),y.push(b,b+1),y.push(b,b+2),y.push(b,b+3),y.push(b+1,b+2),y.push(b+2,b+3),b+=4);d.length&&(g.__webGLVertexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,g.__webGLVertexBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(d),n.STATIC_DRAW),g.__webGLNormalBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,g.__webGLNormalBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(v),n.STATIC_DRAW),g.__webGLUVBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,g.__webGLUVBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(M),n.STATIC_DRAW),g.__webGLFaceBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,g.__webGLFaceBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(x),n.STATIC_DRAW),g.__webGLLineBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,g.__webGLLineBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(y),n.STATIC_DRAW),g.__webGLFaceCount=x.length,g.__webGLLineCount=y.length)},this.renderBuffer=function(t,o){t instanceof e.MeshPhongMaterial?(mAmbient=t.ambient,mDiffuse=t.diffuse,mSpecular=t.specular,n.uniform4f(i.mAmbient,mAmbient.r,mAmbient.g,mAmbient.b,t.opacity),n.uniform4f(i.mDiffuse,mDiffuse.r,mDiffuse.g,mDiffuse.b,t.opacity),n.uniform4f(i.mSpecular,mSpecular.r,mSpecular.g,mSpecular.b,t.opacity),n.uniform1f(i.mShininess,t.shininess),n.uniform1i(i.material,3)):t instanceof e.MeshColorFillMaterial?(color=t.color,n.uniform4f(i.uniformColor,color.r*color.a,color.g*color.a,color.b*color.a,color.a),n.uniform1i(i.material,0)):t instanceof e.MeshColorStrokeMaterial?(lineWidth=t.lineWidth,color=t.color,n.uniform4f(i.uniformColor,color.r*color.a,color.g*color.a,color.b*color.a,color.a),n.uniform1i(i.material,1)):t instanceof e.MeshBitmapMaterial&&(!t.__webGLTexture&&t.loaded&&(t.__webGLTexture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,t.__webGLTexture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.bitmap),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.generateMipmap(n.TEXTURE_2D),n.bindTexture(n.TEXTURE_2D,null)),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.__webGLTexture),n.uniform1i(i.diffuse,0),n.uniform1i(i.material,2)),n.bindBuffer(n.ARRAY_BUFFER,o.__webGLVertexBuffer),n.vertexAttribPointer(i.position,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,o.__webGLNormalBuffer),n.vertexAttribPointer(i.normal,3,n.FLOAT,!1,0,0),t instanceof e.MeshBitmapMaterial?(n.bindBuffer(n.ARRAY_BUFFER,o.__webGLUVBuffer),n.enableVertexAttribArray(i.uv),n.vertexAttribPointer(i.uv,2,n.FLOAT,!1,0,0)):n.disableVertexAttribArray(i.uv),t instanceof e.MeshBitmapMaterial||t instanceof e.MeshColorFillMaterial||t instanceof e.MeshPhongMaterial?(n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o.__webGLFaceBuffer),n.drawElements(n.TRIANGLES,o.__webGLFaceCount,n.UNSIGNED_SHORT,0)):t instanceof e.MeshColorStrokeMaterial&&(n.lineWidth(lineWidth),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o.__webGLLineBuffer),n.drawElements(n.LINES,o.__webGLLineCount,n.UNSIGNED_SHORT,0))},this.renderMesh=function(t,n){var i,o,r,s,a,h,c,l;for(a in t.materialFaceGroup)for(l=t.materialFaceGroup[a],l.__webGLVertexBuffer||this.createBuffers(t,a),r=0,s=t.material.length;r<s;r++)if((c=t.material[r])instanceof e.MeshFaceMaterial)for(i=0,o=l.material.length;i<o;i++)h=l.material[i],this.renderBuffer(h,l);else h=c,this.renderBuffer(h,l)},this.setupMatrices=function(t,r){t.autoUpdateMatrix&&t.updateMatrix(),s.multiply(r.matrix,t.matrix),i.viewMatrixArray=new Float32Array(r.matrix.flatten()),i.modelViewMatrixArray=new Float32Array(s.flatten()),i.projectionMatrixArray=new Float32Array(r.projectionMatrix.flatten()),o=e.Matrix4.makeInvert3x3(s).transpose(),i.normalMatrixArray=new Float32Array(o.m),n.uniformMatrix4fv(i.viewMatrix,!1,i.viewMatrixArray),n.uniformMatrix4fv(i.modelViewMatrix,!1,i.modelViewMatrixArray),n.uniformMatrix4fv(i.projectionMatrix,!1,i.projectionMatrixArray),n.uniformMatrix3fv(i.normalMatrix,!1,i.normalMatrixArray),n.uniformMatrix4fv(i.objMatrix,!1,new Float32Array(t.matrix.flatten()))},this.render=function(t,o){var r,s,a;for(this.autoClear&&this.clear(),o.autoUpdateMatrix&&o.updateMatrix(),n.uniform3f(i.cameraPosition,o.position.x,o.position.y,o.position.z),this.setupLights(t),r=0,s=t.objects.length;r<s;r++)a=t.objects[r],this.setupMatrices(a,o),a instanceof e.Mesh?this.renderMesh(a,o):a instanceof e.Line||e.Particle}},e.RenderableFace3=function(){this.v1=new e.Vector2,this.v2=new e.Vector2,this.v3=new e.Vector2,this.centroidWorld=new e.Vector3,this.normalWorld=new e.Vector3,this.z=null,this.color=null,this.material=null},e.RenderableFace4=function(){this.v1=new e.Vector2,this.v2=new e.Vector2,this.v3=new e.Vector2,this.v4=new e.Vector2,this.centroidWorld=new e.Vector3,this.normalWorld=new e.Vector3,this.z=null,this.color=null,this.material=null},e.RenderableParticle=function(){this.x=null,this.y=null,this.z=null,this.rotation=null,this.scale=new e.Vector2,this.color=null,this.material=null},e.RenderableLine=function(){this.v1=new e.Vector2,this.v2=new e.Vector2,this.z=null,this.color=null,this.material=null},n.a=e},220:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"app"}},221:function(t,n,i){"use strict";var e=i(222),o=i.n(e),r=(i(128),i(122)),s=i.n(r),a=i(169);i.n(a);s.a.defaults.timeout=5e3;var h;s.a.interceptors.request.use(function(t){return h=a.Loading.service({fullscreen:!0,text:"拼命加载中..."}),t},function(t){return h.close(),a.Message.error({message:"加载超时"}),o.a.reject(t)}),s.a.interceptors.response.use(function(t){return h.close(),t},function(t){return h.close(),a.Message.error({message:"网络不给力呀！请稍候再试"}),o.a.reject(t)});s.a},455:function(t,n){},456:function(t,n){},460:function(t,n,i){var e=i(179)(i(220),i(461),null,null);t.exports=e.exports},461:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]}},464:function(t,n,i){i(178),t.exports=i(177)}},[464]);
//# sourceMappingURL=app.91965aa621f9432d1583.js.map